
# HG changeset patch
# User Petr Sumbera <petr.sumbera@oracle.com>
# Date 1702454756 0
# Node ID 8f74c21053bad22f3bf82df063aad1bf59535bc2
# Parent  de61802013d3eabd67e8f7c4382ab95c650835ba
Bug 1868782 - Avoid unnecessary error from glxtest on Solaris and BSDs r=stransky

Bug 1868782 - Avoid unnecessary error from glxtest on Solaris and BSDs

Differential Revision: https://phabricator.services.mozilla.com/D196196

diff --git a/toolkit/xre/glxtest/glxtest.cpp b/toolkit/xre/glxtest/glxtest.cpp
--- a/toolkit/xre/glxtest/glxtest.cpp
+++ b/toolkit/xre/glxtest/glxtest.cpp
@@ -195,6 +195,8 @@
 static void get_pci_status() {
   log("GLX_TEST: get_pci_status start\n");
 
+#if !defined(XP_FREEBSD) && !defined(XP_NETBSD) && !defined(XP_OPENBSD) && \
+    !defined(XP_SOLARIS)
   if (access("/sys/bus/pci/", F_OK) != 0 &&
       access("/sys/bus/pci_express/", F_OK) != 0) {
     record_warning("cannot access /sys/bus/pci");
@@ -275,6 +277,7 @@
   }
 
   pci_cleanup(pacc);
+#endif
 
   log("GLX_TEST: get_pci_status finished\n");
 }
