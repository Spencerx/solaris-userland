Fixes:

Samba client is unable to write to a file it just created.

Samba drops privileges and tries to re-open a file descriptor for writing via
/proc filesystem. The file was originally opened as root, but re-open is done
as common user. The results is EACCES on Solaris.

The workaround is to avoid re-opening a file using /proc filesystem
on Solaris. Instead fall back to fd_open_atomic().

--- samba-4.19.8/source3/smbd/open.c
+++ samba-4.19.8/source3/smbd/open.c
@@ -1233,6 +1233,7 @@ if (p_file_created == NULL) {
 		p_file_created = &__unused_file_created;
 	}
 
+#if 0
 	/*
 	 * TODO: should we move this to the VFS layer?
 	 *       SMB_VFS_REOPEN_FSP()?
@@ -1244,6 +1245,7 @@ mode);
 	if (!NT_STATUS_EQUAL(status, NT_STATUS_MORE_PROCESSING_REQUIRED)) {
 		return status;
 	}
+#endif
 
 	/*
 	 * Close the existing pathref fd and set the fsp flag
