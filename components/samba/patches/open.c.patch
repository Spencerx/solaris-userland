Fixes:

Samba client is unable to write to a file it just created.

Samba drops privileges and tries to re-open a file descriptor for writing via
/proc filesystem. The file was originally opened as root, but re-open is done
as common user. The results is EACCES on Solaris.

The workaround is to avoid re-opening a file using /proc filesystem
on Solaris. Instead fall back to fd_open_atomic().

--- samba-4.19.4/source3/smbd/open.c	2023-11-27 13:09:10.616012800 +0100
+++ samba-4.19.4.new/source3/smbd/open.c	2024-01-24 10:41:38.596720280 +0100
@@ -1289,6 +1289,7 @@ static NTSTATUS reopen_from_fsp(struct f
 		p_file_created = &__unused_file_created;
 	}
 
+#if 0
 	/*
 	 * TODO: should we move this to the VFS layer?
 	 *       SMB_VFS_REOPEN_FSP()?
@@ -1300,6 +1301,7 @@ static NTSTATUS reopen_from_fsp(struct f
 	if (!NT_STATUS_EQUAL(status, NT_STATUS_MORE_PROCESSING_REQUIRED)) {
 		return status;
 	}
+#endif
 
 	/*
 	 * Close the existing pathref fd and set the fsp flag
